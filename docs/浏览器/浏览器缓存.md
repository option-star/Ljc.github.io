---
title: 浏览器缓存
date: 2021-11-07
sidebar: 'auto'
tags:
- HTTP缓存
- 浏览器缓存
- 浏览器
categories:
- 浏览器
isShowComments: true
---



## 为什么使用缓存

对于一个数据请求来说，可以分为三步：

1. 浏览器发起请求
2. 后端处理
3. 浏览器响应

浏览器缓存可以在第一步和第三步优化性能：

- 对于第一步：直接使用缓存资源，直接省去发送请求
- 对于第三步：发起请求但后端存储的数据和缓存数据一致，没必要将数据回传回来，这样就减少了响应数据的传输。

## 缓存位置

从缓存位置来看，各自具有优先级，当一次查找且都没有命中的时候，才会去请求网络。

1. Service Worker
2. Memory Cache
3. Disk Cache
4. Push Cache

### 1. Service Worker

#### 1.1 什么是Service Worker

Service Worker是运行在浏览器背后的独立线程，一般用来进行缓存。该缓存是永久性的，即关闭tab页或者浏览器下次打开依旧存在。

#### 1.2 如何清楚缓存

1. 调用API： `cache.delete(resource)`
2. 缓存容量超过限制，被浏览器全部清空

#### 1.3 步骤

1. 注册Service Worker
2. 监听到install事件以后就可以缓存需要的文件。
3. 下次用户访问时，通过拦截请求方式查询是否存在缓存
4. 若Service Worker没有命中缓存，会使用fetch()方法继续获取资源。这时，浏览器回去memory cache或者disk cache进行查找缓存

::: warning

通过fetch（）方法获取的资源，即便没有命中Service Worker缓存，甚至走了网络请求，获取的资源都会标注为 `from ServiceWorker `

:::







## 请求资源流程



## 缓存策略

