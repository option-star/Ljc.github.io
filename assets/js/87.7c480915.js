(window.webpackJsonp=window.webpackJsonp||[]).push([[87],{739:function(t,s,a){"use strict";a.r(s);var n=a(12),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h2",{attrs:{id:"_1-gc是什么"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-gc是什么"}},[t._v("#")]),t._v(" 1. GC是什么")]),t._v(" "),a("p",[t._v("​\tGC（Garbage Collection）， 程序工作过程中会产生很多垃圾，这些垃圾是程序中不用的内存空间或者是之前用过的，以后不会再用的内存空间")]),t._v(" "),a("h2",{attrs:{id:"_2-为什么需要gc"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-为什么需要gc"}},[t._v("#")]),t._v(" 2. 为什么需要GC")]),t._v(" "),a("p",[t._v("在Chrome中，V8被限制内存的使用，为什么要限制？")]),t._v(" "),a("ul",[a("li",[t._v("表层原因： V8最初为浏览器而设计，不太可能遇到大量内存的使用场景")]),t._v(" "),a("li",[t._v("深层原因： V8的垃圾回收机制限制（如果清楚大量内存垃圾会消耗时间，从而降低性能）")])]),t._v(" "),a("h2",{attrs:{id:"_3-垃圾回收策略有哪些"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-垃圾回收策略有哪些"}},[t._v("#")]),t._v(" 3. 垃圾回收策略有哪些？")]),t._v(" "),a("h3",{attrs:{id:"_1-标记清除法"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-标记清除法"}},[t._v("#")]),t._v(" 1) 标记清除法")]),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"title"}),a("p",[a("strong",[t._v("标记清除法")]),t._v("：引擎在执行GC时，需要从出发点去遍历内存中所有的对象去打标记，而这个出发点有很多，这些出发点称之为一组根对象，而根对象在浏览器中有全局的window对象、文档D0M树等")])]),a("blockquote",[a("p",[t._v("过程")])]),t._v(" "),a("ol",[a("li",[t._v("垃圾收集器在运行时，会给内存中的变量全部标记成0")]),t._v(" "),a("li",[t._v("然后从根对象开始遍历，遍历到的对象标记为1")]),t._v(" "),a("li",[t._v("清除所有标记为0的垃圾，销毁并回收它们所占用的内存空间")]),t._v(" "),a("li",[t._v("最后，把所有对象的标记修改为0，等待下一轮的垃圾回收")])]),t._v(" "),a("blockquote",[a("p",[t._v("优点")])]),t._v(" "),a("ul",[a("li",[t._v("实现简单，只需用一位二进制标记状态（0/1）")])]),t._v(" "),a("blockquote",[a("p",[t._v("缺点")])]),t._v(" "),a("ol",[a("li",[a("strong",[t._v("内存碎片化")]),t._v("。清除后剩余对象内存位置不变会导致空闲空间不连续，出现内存碎片化。")]),t._v(" "),a("li",[a("strong",[t._v("分配速度慢")]),t._v("。即时使用First-fit策略，操作时间复杂度依旧为O(n)")])]),t._v(" "),a("h4",{attrs:{id:"优化"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#优化"}},[t._v("#")]),t._v(" 优化")]),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"title"}),a("p",[a("strong",[t._v("标记清除法")]),t._v(" ： 标记阶段与标记清除法一致，只是标记结束后，标记整理算法会将不需清理的对象向内存的一端移动，最后清理标记的内存。")])]),a("p",[a("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/option-star/imgs/202204071138732.png",alt:"image-20211107092141007"}})]),t._v(" "),a("h3",{attrs:{id:"_2-引用计数法"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-引用计数法"}},[t._v("#")]),t._v(" 2) 引用计数法")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/option-star/imgs/202204071138647.webp",alt:"截屏2021-08-12 下午10.23.45.png"}})]),t._v(" "),a("h4",{attrs:{id:"过程"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#过程"}},[t._v("#")]),t._v(" 过程")]),t._v(" "),a("ol",[a("li",[t._v("值每增加一个变量指向，则该值引用次数加1")]),t._v(" "),a("li",[t._v("值每减少一个变量指向，则该值引用次数减1")]),t._v(" "),a("li",[t._v("值的引用次数为0时，清除所占用的内存")])]),t._v(" "),a("h4",{attrs:{id:"举例"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#举例"}},[t._v("#")]),t._v(" 举例")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" a "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Object")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" \t"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 此对象的引用计数为 1（a引用）")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" b "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" a \t\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 此对象的引用计数是 2（a,b引用）")]),t._v("\na "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),t._v("  \t\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 此对象的引用计数为 1（b引用）")]),t._v("\nb "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),t._v(" \t \t"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 此对象的引用计数为 0（无引用）")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("\t\t\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// GC 回收此对象")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br")])]),a("h4",{attrs:{id:"循环引用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#循环引用"}},[t._v("#")]),t._v(" 循环引用")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("test")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("A")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Object")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("B")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Object")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  \n  "),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("A")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("b "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("B")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("B")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("a "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("A")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br")])]),a("p",[t._v("​\t如上图所示，A引用着B，B引用着A，此时A、B的计数都是2，但当test（）执行完之后，A、B理应被清除，但是由于计数不为0，所以不会被清除，若该函数被大量调用，就会造成大量的内存不会被释放。")]),t._v(" "),a("p",[t._v("对于标记清除法，test执行完之后，A、B当作非活动对象被清除，而对于引用计数算法而言不被回收，所以建议使用标记清除法。")]),t._v(" "),a("h4",{attrs:{id:"优点"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#优点"}},[t._v("#")]),t._v(" 优点")]),t._v(" "),a("ul",[a("li",[t._v("产生垃圾后立即回收")]),t._v(" "),a("li",[t._v("不需要遍历所有对象")])]),t._v(" "),a("h4",{attrs:{id:"缺点"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#缺点"}},[t._v("#")]),t._v(" 缺点")]),t._v(" "),a("ul",[a("li",[t._v("循环引用问题")]),t._v(" "),a("li",[t._v("计数器增加额外的内存空间")])]),t._v(" "),a("h2",{attrs:{id:"_4-标记清除法为什么会产生内存碎片呢"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-标记清除法为什么会产生内存碎片呢"}},[t._v("#")]),t._v(" 4. 标记清除法为什么会产生内存碎片呢？")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/option-star/imgs/202204071138960.png",alt:"image-20211107091459458"}})]),t._v(" "),a("p",[t._v("​\t 标记清除法， 清除后剩余对象位置不变而导致空闲内存不连续，也就出现“内存碎片”，这就涉及了“内存分配问题”。")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/option-star/imgs/202204071138146.png",alt:"image-20211107091631820"}})]),t._v(" "),a("p",[t._v("​\t假设新建对象分配内存需要大小为size,由于空闲内存不连续，则需要对空闲内存列表进行一次单向遍历找出大于等于size的块才能为其分配。有一下三种分配方式。")]),t._v(" "),a("ol",[a("li",[a("strong",[t._v("First-fit")]),t._v(", 找到大于等于size的块立即返回")]),t._v(" "),a("li",[a("strong",[t._v("Best-fit")]),t._v(",  返回大于等于size的最小分块")]),t._v(" "),a("li",[a("strong",[t._v("Worst-fit")]),t._v(", 找到最大分块，然后切成两部分，一部分size大小，并将该部分返回。")])]),t._v(" "),a("p",[t._v("​\t这三种策略里面Worst-fit的空间利用率看起来最合理，但实际上切分之后会造成更多的小块，形成内存碎片，所以不推荐使用，对于First-fit和Best-fit来说，考虑到分配的速度和效率First-fit是更为明智的选择。")]),t._v(" "),a("h2",{attrs:{id:"_5-v8的垃圾回收机制是怎样的"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-v8的垃圾回收机制是怎样的"}},[t._v("#")]),t._v(" 5. V8的垃圾回收机制是怎样的？")]),t._v(" "),a("p",[t._v("​\tV8 实现了准确式 GC，GC 算法采用了分代式垃圾回收机制。因此，V8 将内存（堆）分为新生代和老生代两部分。")]),t._v(" "),a("ul",[a("li",[a("strong",[t._v("新生代")]),t._v("：存放一些新、小、存活时间短的对象")]),t._v(" "),a("li",[a("strong",[t._v("老生代")]),t._v("：存放一些老、大、存活时间长的对象")])]),t._v(" "),a("h3",{attrs:{id:"_1-新生代算法"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-新生代算法"}},[t._v("#")]),t._v(" 1）新生代算法")]),t._v(" "),a("h4",{attrs:{id:"新生代算法具体过程"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#新生代算法具体过程"}},[t._v("#")]),t._v(" 新生代算法具体过程？")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/option-star/imgs/202204071138515.webp",alt:"image.png"}})]),t._v(" "),a("p",[a("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/option-star/imgs/202204071138380.webp",alt:"image.png"}})]),t._v(" "),a("p",[t._v("在新生代中，主要使用"),a("code",[t._v("Scavenge")]),t._v("算法进行垃圾回收。"),a("code",[t._v("Scavange")]),t._v("算法将新生代堆空间分为两部分："),a("code",[t._v("from-sapce")]),t._v("和"),a("code",[t._v("to-space")]),t._v(".")]),t._v(" "),a("p",[t._v("过程如下：")]),t._v(" "),a("ol",[a("li",[t._v("新加入的对象都会存放在"),a("code",[t._v("from-space")]),t._v(", 当"),a("code",[t._v("from-space")]),t._v("快被写满时，就需要进行一次垃圾清理操作。")]),t._v(" "),a("li",[t._v("新生代垃圾回收器会对"),a("code",[t._v("from-space")]),t._v("中的活动对象进行"),a("strong",[t._v("标记")])]),t._v(" "),a("li",[t._v("标记完成后，新生代垃圾回收器通过并行的机制，开启多个辅助线程将"),a("code",[t._v("from-space")]),t._v("的活动对象"),a("strong",[t._v("复制")]),t._v("进"),a("code",[t._v("to-space")]),t._v("并进行排序。")])]),t._v(" "),a("p",[a("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/option-star/imgs/202204071138908.webp",alt:"image.png"}})]),t._v(" "),a("ol",{attrs:{start:"4"}},[a("li",[a("p",[t._v("新生代垃圾回收器会将非活动对象占用的空间"),a("strong",[t._v("清除掉")])])]),t._v(" "),a("li",[a("p",[t._v("最后，将"),a("code",[t._v("from space")]),t._v("与"),a("code",[t._v("to-space")]),t._v("进行"),a("strong",[t._v("互换")])])])]),t._v(" "),a("h4",{attrs:{id:"如何保证线程之间的不重复复制呢"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#如何保证线程之间的不重复复制呢"}},[t._v("#")]),t._v(" 如何保证线程之间的不重复复制呢？")]),t._v(" "),a("p",[t._v("​\t由于多个线程竞争一个新生代堆资源，可能多个线程复制了同一个对象，所以V8中，当线程复制完对象后，需要去维护复制对象的指针转发地址，以便其他线程判断活动对象是否被复制过。")]),t._v(" "),a("h3",{attrs:{id:"_2-老生代算法"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-老生代算法"}},[t._v("#")]),t._v(" 2）老生代算法")]),t._v(" "),a("h4",{attrs:{id:"什么情况下对象会出现在老生代空间中"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#什么情况下对象会出现在老生代空间中"}},[t._v("#")]),t._v(" 什么情况下对象会出现在老生代空间中：")]),t._v(" "),a("ol",[a("li",[t._v("如果一个对象经过复制后，依旧存活，会被移到老生代区")]),t._v(" "),a("li",[t._v("如果复制一个对象到"),a("code",[t._v("to-space")]),t._v("后，"),a("code",[t._v("to-space")]),t._v("占用超过了25%,那么这个对象会被直接移动到老生代区中，设置25%的原因是,当完成"),a("code",[t._v("Scavenge")]),t._v("回收后，"),a("code",[t._v("from space")]),t._v("与"),a("code",[t._v("to-space")]),t._v("进行互换，继续进行对象内存的分配，若占比过大，将影响后续内存的分配。")])]),t._v(" "),a("h4",{attrs:{id:"什么情况下会启动清除算法"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#什么情况下会启动清除算法"}},[t._v("#")]),t._v(" 什么情况下会启动清除算法？")]),t._v(" "),a("ul",[a("li",[t._v("某一个空间没有分块的时候")]),t._v(" "),a("li",[t._v("空间中被对象超过一定限制")]),t._v(" "),a("li",[t._v("空间不能保证新生代中的对象移动到老生代中")])]),t._v(" "),a("h4",{attrs:{id:"老生代算法具体过程"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#老生代算法具体过程"}},[t._v("#")]),t._v(" 老生代算法具体过程")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/option-star/imgs/202204071142179.webp",alt:"image.png"}})]),t._v(" "),a("p",[a("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/option-star/imgs/202204071142178.webp",alt:"image.png"}})]),t._v(" "),a("p",[t._v("因为老生代的对象通常比较大，若如新生代般操作的话，就会比较耗时，从而导致效率不高，所以老生代垃圾回收器则采用标记清除法。")]),t._v(" "),a("ol",[a("li",[t._v("首先是标记阶段，从一组根元素开始，遍历这组根元素，遍历过程中能达到的元素称为活动对象，没有达到的元素被称为非活动对象。"),a("strong",[t._v("标记阶段，主要通过并发标记，标记操作全部由辅助进程完成")])]),t._v(" "),a("li",[t._v("清除阶段。老生代回收器会直接将非活动对象，也就是数据清除掉。该阶段中开启"),a("strong",[t._v("并行")]),t._v("操作，多个辅助线程协助清除。清理的任务会采用"),a("strong",[t._v("增量")]),t._v("的方式分批在各个JS任务之间执行。")]),t._v(" "),a("li",[t._v("由于标记清除算法在清楚后会产生大量不连续的内存碎片，过多的碎片会导致大对象无法分配到足够的连续内存，所以V8就采用了标记整理算法")])]),t._v(" "),a("h4",{attrs:{id:"标记阶段的优化"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#标记阶段的优化"}},[t._v("#")]),t._v(" 标记阶段的优化？")]),t._v(" "),a("ol",[a("li",[a("p",[a("strong",[t._v("全停顿（Stop-The-World）")]),t._v("： 由于Javascript是单线程的，在进行垃圾回收的时候就会阻塞Javascript脚本的执行，需等待垃圾回收完毕后在恢复脚本执行，我们把这种行为叫做全停顿")])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("增量标记")]),t._v("： 2011 年，V8 从 stop-the-world 标记切换到增量标志。在增量标记期间，GC 将标记工作分解为更小的模块，可以让 JS 应用逻辑在模块间隙执行一会，从而不至于让应用出现停顿情况。")])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("并发标记")]),t._v(" ：2018年，GC 技术又有了一个重大突破，这项技术名为并发标记。该技术可以让 GC 扫描和标记对象时，同时允许 JS 运行。")])])]),t._v(" "),a("h2",{attrs:{id:"_6-什么是增量标记"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-什么是增量标记"}},[t._v("#")]),t._v(" 6. 什么是增量标记？")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/option-star/imgs/202204071141864.webp",alt:"img"}})]),t._v(" "),a("p",[t._v("​\t增量标记主要在标记阶段进行优化。增量就是将一次 "),a("code",[t._v("GC")]),t._v(" 标记的过程，分成了很多小步，每执行完一小步就让JS代码执行一会，这样交替多次后完成一轮 "),a("code",[t._v("GC")]),t._v(" 标记。")]),t._v(" "),a("h4",{attrs:{id:"三色标记法-暂停与恢复"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#三色标记法-暂停与恢复"}},[t._v("#")]),t._v(" 三色标记法（暂停与恢复）")]),t._v(" "),a("h5",{attrs:{id:"为什么需要三色标记法"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#为什么需要三色标记法"}},[t._v("#")]),t._v(" 为什么需要三色标记法？")]),t._v(" "),a("p",[t._v("如果采用标记清除法时，通过0、1记录状态，那在垃圾回收器执行一段增量回收后，暂停后使用主线程去执行JS代码，当垃圾回收器再次被启动时，内存中全是0、1标志位，无法得知下一步到哪。所以为了解决这个问题，才出现了"),a("code",[t._v("三色标记法")]),t._v("。")]),t._v(" "),a("h5",{attrs:{id:"过程-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#过程-2"}},[t._v("#")]),t._v(" 过程")]),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"title"}),a("ul",[a("li",[a("strong",[t._v("白")]),t._v("：未被标记的对象")]),t._v(" "),a("li",[a("strong",[t._v("灰")]),t._v("：自身被标记，子引用对象未被登记")]),t._v(" "),a("li",[a("strong",[t._v("黑")]),t._v("：自身与子引用对象皆被标记")])])]),a("p",[a("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/option-star/imgs/202204071141826.webp",alt:"img"}})]),t._v(" "),a("ol",[a("li",[t._v("在GC并发开始时，所有对象都是白色的")]),t._v(" "),a("li",[t._v("将所有的GC Roots直接引用的对象标记为灰色集合")]),t._v(" "),a("li",[t._v("判断灰色对象集合中对象是否存在子引用\n"),a("ol",[a("li",[t._v("不存在： 则将灰色对象放入黑色集合")]),t._v(" "),a("li",[t._v("存在：将其所有子引用对象存放到灰色集合，当前对象放入黑色集合中")])])]),t._v(" "),a("li",[t._v("通过循环判断灰色集合，直至灰色集合中所有的对象变黑后，本轮标记完成，并把白色集合中的对象标记为不可达对象")]),t._v(" "),a("li",[t._v("标记结束后，白色对象为GC Roots不可达，可以进行垃圾回收")])]),t._v(" "),a("h5",{attrs:{id:"如何进行恢复"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#如何进行恢复"}},[t._v("#")]),t._v(" 如何进行恢复")]),t._v(" "),a("p",[t._v("可以直接通过当前内存中有没有灰色节点来判断整个标记是否完成。")]),t._v(" "),a("ul",[a("li",[t._v("无灰色节点：直接进入清理阶段")]),t._v(" "),a("li",[t._v("有灰色节点：恢复时直接从灰色节点开始继续执行标记。")])]),t._v(" "),a("h4",{attrs:{id:"写屏障-增量中修改引用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#写屏障-增量中修改引用"}},[t._v("#")]),t._v(" 写屏障（增量中修改引用）")]),t._v(" "),a("p",[a("code",[t._v("写屏障 (Write-barrier)")]),t._v(" 机制一旦有黑色对象引用白色对象，该机制会强制将引用的白色对象改为灰色，从而保证下一次增量 "),a("code",[t._v("GC")]),t._v(" 标记阶段可以正确标记，这个机制也被称作 "),a("code",[t._v("强三色不变性")]),t._v("。")]),t._v(" "),a("h2",{attrs:{id:"_7-什么是懒性清理"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_7-什么是懒性清理"}},[t._v("#")]),t._v(" 7. 什么是懒性清理？")]),t._v(" "),a("p",[a("strong",[t._v("懒性清除")]),t._v("主要对清除阶段进行优化，如果当前的剩余内存空间足以让JS代码运行，则延迟清除过程，先让JS运行，也无需一次性清理完所有的非活动对象内存。")]),t._v(" "),a("h2",{attrs:{id:"_8-什么是并行回收"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_8-什么是并行回收"}},[t._v("#")]),t._v(" 8. 什么是并行回收？")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/option-star/imgs/202204071141033.webp",alt:"img"}})]),t._v(" "),a("p",[t._v("​\t并行式GC允许主线程和辅助线程同时执行同样的GC工作，这样可以让辅助线程来分担主线程的GC工作，使得垃圾回收所耗费的时间等于总时间除以参与的线程数量（加上一些同步开销）。")]),t._v(" "),a("h2",{attrs:{id:"_9-什么是并发回收"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_9-什么是并发回收"}},[t._v("#")]),t._v(" 9. 什么是并发回收？")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/option-star/imgs/202204071141386.webp",alt:"img"}})]),t._v(" "),a("p",[t._v("​\t主线程在执行 "),a("code",[t._v("JavaScript")]),t._v(" 的过程中，辅助线程能够在后台完成执行垃圾回收的操作，辅助线程在执行垃圾回收的时候，主线程也可以自由执行而不会被挂起。")]),t._v(" "),a("h2",{attrs:{id:"_10-哪些操作会造成内存泄漏"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_10-哪些操作会造成内存泄漏"}},[t._v("#")]),t._v(" 10.哪些操作会造成内存泄漏？")]),t._v(" "),a("h3",{attrs:{id:"_1-意外的全局变量"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-意外的全局变量"}},[t._v("#")]),t._v(" 1）意外的全局变量")]),t._v(" "),a("blockquote",[a("p",[t._v("原因")])]),t._v(" "),a("p",[t._v("​\t由于使用未声明的变量，而意外创建一个全局变量，变量只有在窗口关闭或者 重新刷新页面时才会被释放，如果未声明的变量缓存着大量的数据，就会导致内存泄漏。")]),t._v(" "),a("blockquote",[a("p",[t._v("举例")])]),t._v(" "),a("ul",[a("li",[t._v("未声明的变量")])]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("fn")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  a "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'global variable'")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("fn")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br")])]),a("ul",[a("li",[t._v("使用this创建的变量（this指向window）")])]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("fn")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("a "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'global variable'")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("fn")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br")])]),a("blockquote",[a("p",[t._v("解决")])]),t._v(" "),a("ol",[a("li",[t._v("避免创建全局变量")]),t._v(" "),a("li",[t._v("使用严格模式"),a("code",[t._v("use strict")])])]),t._v(" "),a("h3",{attrs:{id:"_2-闭包"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-闭包"}},[t._v("#")]),t._v(" 2) 闭包")]),t._v(" "),a("blockquote",[a("p",[t._v("原因")])]),t._v(" "),a("p",[t._v("​\t闭包可以读取到函数内部的变量，那些变量都保存在内存种。如果在使用结束之后没有将局部变量清除，就可能导致内存泄漏")]),t._v(" "),a("blockquote",[a("p",[t._v("实例")])]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("fn")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" a "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"I\'m a"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("a"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br")])]),a("blockquote",[a("p",[t._v("解决")])]),t._v(" "),a("ul",[a("li",[t._v("将事件处理函数定义在外部，解除闭包")])]),t._v(" "),a("h3",{attrs:{id:"_3-没清理的dom引用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-没清理的dom引用"}},[t._v("#")]),t._v(" 3）没清理的DOM引用")]),t._v(" "),a("blockquote",[a("p",[t._v("原因")])]),t._v(" "),a("p",[t._v("获取一个DOM元素的引用，而后面这个元素被删除，由于一直保留这个元素的引用，所以它也无法被回收。")]),t._v(" "),a("blockquote",[a("p",[t._v("实例")])]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 在对象中引用DOM")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" elements "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("btn")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" document"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getElementById")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'btn'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("doSomeThing")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  elements"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("btn"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("click")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("removeBtn")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 将body中的btn移除, 也就是移除 DOM树中的btn")]),t._v("\n  document"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("body"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("removeChild")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("document"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getElementById")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'button'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 但是此时全局变量elements还是保留了对btn的引用, btn还是存在于内存中,不能被GC回收")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br")])]),a("blockquote",[a("p",[t._v("解决")])]),t._v(" "),a("ul",[a("li",[t._v("手动删除, "),a("code",[t._v("elements.btn = null")])])]),t._v(" "),a("h3",{attrs:{id:"_4-被遗忘的定时器或者回调函数"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-被遗忘的定时器或者回调函数"}},[t._v("#")]),t._v(" 4）被遗忘的定时器或者回调函数")]),t._v(" "),a("blockquote",[a("p",[t._v("原因")])]),t._v(" "),a("p",[t._v("设置了"),a("code",[t._v("setInterval")]),t._v("定时器，而忘记取消它，如果循环函数有对外部变量的引用，那么这个变量会被一直保留在内存中，而无法被回收。")]),t._v(" "),a("blockquote",[a("p",[t._v("实例")])]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 定时器")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" serverData "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("loadData")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setInterval")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" renderer "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" document"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getElementById")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'renderer'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("renderer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    renderer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("innerHTML "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("JSON")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("stringify")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("serverData"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("5000")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 观察者模式")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" btn "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" document"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getElementById")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'btn'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("onClick")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("element")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  element"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("innerHTMl "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"I\'m innerHTML"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\nbtn"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("addEventListener")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'click'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" onClick"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br"),a("span",{staticClass:"line-number"},[t._v("14")]),a("br"),a("span",{staticClass:"line-number"},[t._v("15")]),a("br")])]),a("blockquote",[a("p",[t._v("解决")])]),t._v(" "),a("ul",[a("li",[t._v("手动删除定时器")])]),t._v(" "),a("h2",{attrs:{id:"_11-es6如何防止内存泄漏"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_11-es6如何防止内存泄漏"}},[t._v("#")]),t._v(" 11. ES6如何防止内存泄漏")]),t._v(" "),a("blockquote",[a("p",[t._v("原因")])]),t._v(" "),a("p",[t._v("​\tweakset和weakmap，这两种数据结构，如果其他对象不再引用该对象，那么垃圾回收机制会自动回收该对象所占用的内存。")]),t._v(" "),a("blockquote",[a("p",[t._v("举例")])]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" wm "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("WeakMap")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" element "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" document"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getElementById")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'example'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nvm"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("set")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("element"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'something'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nvm"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("element"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br")])]),a("p",[t._v("事件监听")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 代码1")]),t._v("\nele"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("addEventListener")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'click'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" handler"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 代码2")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" listener "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("WeakMap")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nlistener"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("set")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ele"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" handler"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nele"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("addEventListener")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'click'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" listener"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ele"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br")])]),a("p",[t._v("代码2比起代码1的好处是：由于监听函数是放在Weakmap里面，一旦dom对象消失，与它绑定的监听函数handler也会自动消失。")]),t._v(" "),a("h2",{attrs:{id:"_12-vue常见内存泄漏情况"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_12-vue常见内存泄漏情况"}},[t._v("#")]),t._v(" 12. Vue常见内存泄漏情况")]),t._v(" "),a("h3",{attrs:{id:"_1-监听window-body等事件没有解绑"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-监听window-body等事件没有解绑"}},[t._v("#")]),t._v(" 1) 监听window/body等事件没有解绑")]),t._v(" "),a("blockquote",[a("p",[t._v("实例")])]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("template"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("div id"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"home"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("这里是首页"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("div"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("template"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("script"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("mounted")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  window"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("addEventListener")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'resize'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("func"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// window对象引用了home页面的方法")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("script"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br")])]),a("blockquote",[a("p",[t._v("解决")])]),t._v(" "),a("p",[t._v("在页面销毁时，解除引用，释放内存")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("beforeDestroy")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  window"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("removeEventListener")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'resize'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("func"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br")])]),a("h3",{attrs:{id:"_2-绑在eventbus的事件没有解绑"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-绑在eventbus的事件没有解绑"}},[t._v("#")]),t._v(" 2) 绑在"),a("a",{attrs:{href:"https://juejin.cn/post/6844903895798382599",target:"_blank",rel:"noopener noreferrer"}},[t._v("EventBus"),a("OutboundLink")],1),t._v("的事件没有解绑")]),t._v(" "),a("blockquote",[a("p",[t._v("实例")])]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("template"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("div id"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"home"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("这里是首页"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("div"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("template"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("script"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("mounted")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n   "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("$EventBus"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("$on")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'homeTask'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("res")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("func")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("script"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br")])]),a("blockquote",[a("p",[t._v("解决")])]),t._v(" "),a("p",[t._v("页面销毁时解除引用")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("destroyed")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("$EventBus"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("$off")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br")])]),a("h3",{attrs:{id:"_3-echarts"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-echarts"}},[t._v("#")]),t._v(" 3)Echarts")]),t._v(" "),a("blockquote",[a("p",[t._v("原因")])]),t._v(" "),a("p",[t._v("每一个图例在没有数据的时候，都会创建一个定时器去渲染气泡，在页面切换的时候，虽然图例销毁了，但echart的实例还存在内存中，所以其定时器也没有被销毁，这就会导致Echats占比CPU高，导致页面卡顿")]),t._v(" "),a("blockquote",[a("p",[t._v("解决")])]),t._v(" "),a("p",[t._v("页面销毁前，释放该页面的chart资源")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("beforeDestroy")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("chart"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("clear")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br")])])])}),[],!1,null,null,null);s.default=e.exports}}]);